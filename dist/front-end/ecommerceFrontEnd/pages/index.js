"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const head_1 = require("next/head");
const react_redux_1 = require("react-redux");
const store_1 = require("../app/store");
const Categories_1 = require("../components/categories/Categories");
const categories_api_1 = require("../features/categories/categories-api");
const products_api_1 = require("../features/products/products-api");
const search_1 = require("../features/products/search");
const Home_module_css_1 = require("../styles/Home.module.css");
const Home = () => {
    const dispatch = (0, react_redux_1.useDispatch)();
    let products = [];
    let sections = [];
    const search = (0, store_1.useSelector)((state) => state.search);
    let query = "";
    let s = search.query;
    if (s && s.length > 0) {
        query = s;
    }
    const { data: AllProducts, isSuccess: success } = (0, products_api_1.useGetAllProductsQuery)(query);
    const { data: categories, isSuccess, isLoading, } = (0, categories_api_1.useGetAllCategoriesQuery)("");
    if (success) {
        products = AllProducts;
    }
    if (isSuccess) {
        sections = categories;
    }
    if (s.length === 1) {
        dispatch((0, search_1.emptyQuery)());
    }
    return (<div className={Home_module_css_1.default.container}>
      <head_1.default>
        <title>E-commerce</title>
        <meta name="description" content="Generated by create next app"/>
        <link rel="icon" href="/logo.png"/>
      </head_1.default>

      <Categories_1.default products={products} sections={sections} isLoading={isLoading}/>
    </div>);
};
exports.default = Home;
//# sourceMappingURL=index.js.map