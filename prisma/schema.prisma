generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["mongoDb"]
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
  username String
  password String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  email     String   @unique
  firstname      String?
  lastname String?
  status String @default("active")
  roleId String  @db.ObjectId
  userRole userRole?
}


model Role {
    id        String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
    name String
    userRole userRole?  
}

model userRole {
  id        String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
  userId String @db.ObjectId
  roleId String  @db.ObjectId
  user User @relation(fields: [userId],references:[id])
  role Role @relation(fields: [roleId],references:[id])

}


model Product {
    id        String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
    name String
    desc String
    price Float
   categoryId String @db.ObjectId
  status String @default("active")

   category Category @relation(fields:[categoryId] ,references:[id])

}
model  Category {
      id        String   @id @default(dbgenerated()) @map("_id") @db.ObjectId
      name String
      desc String
      status String @default("active")
      products Product []
}